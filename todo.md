# 東舞鶴F.C ウェブサイト TODO

## データベース設計
- [x] お知らせ記事テーブルの作成（タイトル、本文、カテゴリ、日時）
- [x] 試合結果テーブルの作成（対戦相手、スコア、日時、会場）
- [x] お問い合わせテーブルの作成（名前、メール、メッセージ、日時）
- [x] BBS投稿テーブルの作成（投稿者、本文、日時）

## バックエンドAPI実装
- [x] お知らせ記事のCRUD操作（作成・読取・更新・削除）
- [x] 試合結果のCRUD操作
- [x] お問い合わせフォームの送信処理
- [x] BBS投稿のCRUD操作
- [x] 管理者権限チェック機能

## フロントエンド実装
- [x] 黒を基調としたグローバルテーマ設定
- [x] ヘッダーナビゲーション（ロゴ、メニュー）
- [x] フッター
- [x] トップページ（ヒーローセクション、チーム紹介）
- [x] お知らせ一覧ページ（カテゴリフィルター機能）
- [x] お知らせ詳細ページ
- [x] 管理画面（お知らせ記事の追加・編集・削除）
- [x] スケジュールページ（Googleカレンダー埋め込み）
- [x] お問い合わせフォームページ
- [x] BBSページ（投稿一覧・新規投稿）
- [x] チーム情報ページ（基本方針、クラブ会費、指導者一覧）
- [x] 試合結果ページ
- [x] レスポンシブデザイン対応

## 素材準備
- [x] ロゴ画像をpublicフォルダに配置
- [x] 提供された写真素材をpublicフォルダに配置

## テスト
- [x] お知らせCRUD機能のテスト
- [x] お問い合わせフォームのテスト
- [x] BBS機能のテスト
- [x] 管理者権限のテスト

## 最終確認
- [ ] 全ページの動作確認
- [ ] レスポンシブデザインの確認
- [ ] チェックポイント作成

## Instagram連携
- [x] Instagram公式埋め込みウィジェットをトップページに追加
- [ ] 実際のInstagram投稿の埋め込みコードを追加（後回し）

## バグ修正
- [x] /teamページのネストされた<a>タグエラーを修正

## デザイン調整
- [x] メインカラーを黒色から青色に変更

## デザイン調整（追加）
- [x] ヘッダーの背景色を黒から青色に変更
- [x] フッターの背景色をヘッダーと同じ青色に変更

## Googleカレンダー連携
- [x] スケジュールページにGoogleカレンダー埋め込み機能を実装
- [ ] 実際のカレンダーIDに置き換え（後で対応）

## デザイン調整（背景色）
- [x] トップページの黒色背景を白色に変更
- [x] 文字色を白色から黒色に変更


## 今後の対応（ユーザー側で実施）
- [ ] 実際のチームカレンダーを作成: Googleカレンダーで東舞鶴F.C専用のカレンダーを作成し、練習・試合予定を入力して埋め込みコードを置き換え
- [ ] 管理画面からお知らせを投稿: 実際の練習日程や試合結果などのお知らせを数件投稿して、サイトに活気を持たせる

## 背景色統一（全ページ）
- [x] 全ページの背景色を黒色から白色に統一


## コンテンツ追加
- [x] チーム情報ページにクラブ会費表を追加
- [x] チーム情報ページに指導者一覧を追加


## SNS連携
- [x] SNSシェアボタン（X・Facebook・LINE）をページに設置
- [x] シェア時にロゴマークが表示されるようにOGP設定を追加
- [x] Instagram埋め込みを実装（@higashimaizurufc）

## バグ修正
- [x] ShareButtonsコンポーネントのwindowオブジェクトアクセスエラーを修正
- [x] InstagramFeedコンポーネントのInstagram埋め込みスクリプトエラーを修正


## UX改善・モダン化
- [x] ヒーロー画像の動的エフェクト追加（パララックス・グロー効果）
- [x] ダークモード対応（トグルボタン付き）
- [x] アニメーション・トランジション効果の追加
- [x] 地図・アクセス情報の充実（Google Maps埋め込み）
- [x] クイックアクション（浮遊ボタン）の追加
- [x] ホームページのスクリプトエラーを修正
- [x] Instagram埋め込みスクリプトのInvariant Violationエラーを修正
- [x] 各ページに動的なOGP設定を追加（ページごとのタイトル、説明、画像）

## 検索・フィルター機能
- [x] データベーススキーマに対戦相手フィールドを追加
- [x] tRPCプロシージャに検索・フィルター機能を追加
- [x] スケジュールページに日付範囲フィルター・対戦相手検索を実装
- [x] 試合結果ページに日付範囲フィルター・対戦相手検索を実装

## SEO改善
- [x] SEOHeadコンポーネントにメタキーワードを追加
- [x] Home.tsxに構造化データ（JSON-LD）を追加
- [x] Home.tsxにSEO用のテキストコンテンツを追加

## 管理画面機能追加
- [x] tRPCプロシージャに掲示板投稿削除機能を追加（既に実装済み）
- [x] tRPCプロシージャにスケジュール作成・編集・削除機能を追加（既に実装済み）
- [x] tRPCプロシージャに試合結果作成・編集・削除機能を追加（既に実装済み）
- [x] 管理画面に統合管理ページを作成（掲示板・スケジュール・試合結果）

## Instagram表示復元
- [x] InstagramFeedコンポーネントを投稿グリッド表示に復元
- [x] Instagram公式埋め込みスクリプトでプロフィール表示を実装

## Instagram投稿の手動埋め込み機能
- [ ] 管理画面からInstagram投稿を登録・編集・削除できる機能を実装
- [ ] 登録されたInstagram投稿をホームページに表示

## バグ修正・機能改善（2025年1月）
- [x] 練習場所の住所を修正（〒625-0005 京都府舞鶴市朝来中545-1）
- [x] AccessMapコンポーネントの地図表示を修正
- [x] 掲示板を誰でも投稿できるように変更（認証不要）

## バグ修正（2025年1月20日）
- [x] 管理画面の試合結果投稿機能のエラーを修正（DatePickerコンポーネントを導入）

## バグ修正（2025年1月20日 - 追加）
- [x] 試合結果投稿フォームのバリデーションエラーを修正（スコアの初期値を0に設定）


## 管理画面URL簡潔化（今後の対応）
- [ ] 管理画面URLを簡潔にする（カスタムドメイン購入 or ドメインプレフィックス短縮のいずれかを選択）
  - オプション1: カスタムドメイン購入（例：higashimaizuru-fc.com → https://higashimaizuru-fc.com/admin）
  - オプション2: ドメインプレフィックス短縮（Management UI > Domains パネルで変更）


## トップページへの基本方針セクション追加
- [x] 参考サイトから基本方針の文言を取得
- [x] トップページにリッチでモダンな基本方針セクションを追加（3色グラデーション背景・アイコン付き）


## 基本方針セクションのテキスト修正
- [x] 「Jrから大人までの一体型クラブ運営を目指しています」を1行に収まるように調整
- [x] 「サッカーは、子供の創造性をのばすことのできるスポーツです。」→「サッカーは子供の創造性をのばせるスポーツです。」に変更
- [x] 「無限の選択肢が秘めているボールにどんな命を吹き込むか、すべてがその子供の創造性にゆだねられています」→「無限の選択肢が秘めているボールにどんな命を吹き込むか、全てが子供の創造性次第です」に変更
- [x] 「サッカーは子どもを大人にし、大人を紳士にする。」を1行表記に変更


## バグ修正（2025年1月20日 - スマートフォン管理画面アクセス）
- [x] スマートフォンから管理画面にアクセスした際の「管理者権限が必要です」エラーを修正（認証不要化）


## Googleカレンダー埋め込み
- [x] Googleカレンダーにアクセスし埋め込みコードを取得
- [x] スケジュールページにカレンダーを埋め込み
- [x] レスポンシブデザインに対応

## 連絡先情報とInstagram表示の更新（2026年1月22日）
- [x] LINE IDを正しい情報に更新（sanky13）
- [x] 電話番号を正しい情報に更新（090-9624-9395）
- [ ] Instagram投稿表示を参考サイト（https://sla.scf-tokyo.com/）のように改善（後回し）
  - Instagram Graph APIの設定が必要（Facebook開発者アカウント、Facebook App作成、アクセストークン取得）
  - 代替案：現在の公式埋め込みを維持、またはEmbedSocial/Juicer等のサードパーティサービスを使用

## Instagram表示問題の修正（2026年1月22日）
- [ ] Instagram埋め込みが表示されない問題を調査
- [ ] Instagram表示方法を修正（最新の投稿が表示されるように）
- [ ] 動作確認

## ロゴ画像の差し替え（2026年1月22日）
- [ ] 新しいエンブレム画像をプロジェクトに配置
- [ ] ロゴ画像のパスを更新
- [ ] 動作確認

## HOME画面のロゴ画像差し替え（2026年1月22日）
- [ ] 新しいエンブレム画像をプロジェクトに配置
- [ ] HOME画面のボール画像を新しいエンブレムに差し替え
- [ ] 動作確認

## 全ロゴ画像の差し替え（2026年1月22日）
- [x] 新しいエンブレム画像をプロジェクトに配置
- [x] ヘッダーロゴを差し替え
- [x] HOME画面のロゴを差し替え
- [x] ファビコンを差し替え
- [x] その他すべてのロゴ箇所を確認して差し替え
- [x] 動作確認

## ファビコンの変更（2026年1月22日）
- [x] 新しいエンブレム画像からファビコンを生成
- [x] ファビコンファイルを配置
- [x] HTMLでファビコンを設定
- [x] 動作確認

## HOME画面背景画像の差し替え（2026年1月22日）
- [x] 参考サイトのデザインを確認
- [x] 新しいチーム集合写真を配置
- [x] 背景画像を差し替え
- [x] 動作確認

## 写真ギャラリー機能の実装（2026年1月22日）
- [x] データベーススキーマを設計・追加（photosテーブル）
- [x] データベースマイグレーションを実行
- [x] サーバー側のAPI（tRPCプロシージャ）を実装
  - [x] 写真一覧取得
  - [x] 写真アップロード
  - [x] 写真削除
- [x] 管理画面の写真管理ページを実装
  - [x] 写真アップロードフォーム
  - [x] 写真一覧表示
  - [x] 写真削除機能
- [x] 公開ギャラリーページを実装
  - [x] グリッド表示
  - [x] 写真拡大表示
  - [x] レスポンシブデザイン
- [x] 動作確認

## 管理画面のログイン保護削除（2026年1月22日）
- [x] AdminPhotos.tsxのログイン保護を削除
- [x] Admin.tsxのログイン保護を削除
- [x] 写真投稿・削除がログインなしで可能に
- [x] 動作確認

## 管理画面のパスワード保護実装（環境変数使用）（2026年1月22日）
- [ ] 不要なデータベース変更をロールバック
- [ ] 環境変数ADMIN_PASSWORDを設定（初期値：kyoto123）
- [ ] パスワード保護ページを実装
- [ ] パスワード変更機能を管理画面に追加
- [ ] 動作確認

## お知らせカテゴリー構造2階層化（2026年1月22日）
- [x] データベーススキーマを更新（メインカテゴリー＋サブカテゴリー）
- [x] サーバーロジック（db.ts、routers.ts）を更新
- [x] 管理画面のお知らせ作成フォームをメインカテゴリー＋サブカテゴリー選択に対応
- [x] 管理画面のお知らせ編集フォームをメインカテゴリー＋サブカテゴリー選択に対応
- [x] フロントエンドのお知らせ表示をカテゴリーフィルター対応に更新
- [x] テストを実行して全機能が正常に動作することを確認


## お知らせカテゴリー必須化と試合結果カテゴリー追加（2026年1月24日）
- [x] お知らせ投稿時にメインカテゴリーとサブカテゴリーを必須項目にした
- [x] データベーススキーマを更新して試合結果にカテゴリーフィールド（U7～U12・その他）を追加
- [x] サーバーロジック（db.ts、routers.ts）を更新して試合結果カテゴリーに対応
- [x] 管理画面で試合結果投稿時にカテゴリーを必須選択できるように変更
- [x] フロントエンドの試合結果表示にカテゴリーを追加
- [x] 試合結果フィルターにカテゴリーでのソート機能を追加
- [x] テストを実行して全機能が正常に動作することを確認


## バグ修正（2026年1月24日）
- [x] 試合結果ページのSelect.Itemエラーを修正（空の値を持つアイテムを削除）
- [x] 管理画面の試合結果投稿フォームで試合日が選択できない問題を修正


## スケジュール学年フィルター追加（2026年1月24日）
- [x] データベーススキーマを更新してスケジュールに学年フィールド（U7～U12・全体）を追加
- [x] サーバーロジック（db.ts、routers.ts）を更新してスケジュール学年に対応
- [x] 管理画面でスケジュール投稿時に学年を必須選択できるように変更
- [x] フロントエンドのスケジュール表示に学年を追加
- [x] スケジュールフィルターに学年でのソート機能を追加
- [x] テストを実行して全機能が正常に動作することを確認


## バグ修正：スケジュール編集・更新機能（2026年1月24日）
- [x] 管理画面のスケジュール編集・更新機能の問題を調査
- [x] スケジュール更新ロジックを修正して正常に動作するように変更
- [x] ブラウザで実際に編集・更新が正常に動作することを確認


## UI改善：スケジュール学年別バッジ色分け（2026年1月24日）
- [x] スケジュール画面で学年別に色分けしたバッジを表示する機能を実装
- [x] ブラウザで学年別の色が正しく表示されることを確認


## 管理画面統合（2026年1月24日）
- [x] 管理画面のルーティングとコンポーネント構造を確認して統合方針を決定
- [x] /adminに全ての管理機能（お知らせ、試合結果、スケジュール、写真、設定）を統合してタブ構造で表示
- [x] /admin/managementと/admin/photosのルートを/adminにリダイレクト
- [x] ブラウザで統合された管理画面が正常に動作することを確認


## 管理画面入力フォーム改善（2026年1月24日）
- [x] 現在の入力フォームの問題点を特定して改善方針を決定
- [x] お知らせ入力フォームを改善（プレースホルダー、ヘルプテキスト、required属性）
- [x] 試合結果入力フォームを改善（プレースホルダー、ヘルプテキスト、required属性）
- [x] スケジュール入力フォームを改善（ヘルプテキスト）
- [x] ブラウザで改善されたフォームが正常に動作することを確認


## 管理画面TOPボタン追加（2026年1月24日）
- [ ] 管理画面の各ページ（コンテンツ管理、写真管理）に「管理画面TOP」ボタンを追加
- [ ] ブラウザでボタンが正常に動作することを確認


## 掲示板管理機能追加（2026年1月24日）
- [x] 掲示板ページと関連コードを確認して現状を把握
- [x] 管理者が掲示板投稿を削除できる機能を実装
- [x] 管理画面に掲示板管理タブを追加
- [x] ブラウザで削除機能が正常に動作することを確認


## 掲示板コメント機能の実装（2026年1月27日）
- [x] データベーススキーマにbbsCommentsテーブルを追加
- [x] server/db.tsにコメント関連のヘルパー関数を追加
- [x] server/routers.tsにbbsCommentsルーターを追加
- [x] client/src/pages/Bbs.tsxにコメント表示・投稿機能を追加
- [x] 管理画面にコメント管理タブを追加
- [x] コメント機能のテストを作成（4テスト）
- [x] すべてのテスト（16/16）が正常に通過


## TOP右下のお問い合わせボタンのUI改善（2026年1月27日）
- [x] お問い合わせボタンの現在のスタイルを確認
- [x] ボタンの色をフッターと区別しやすい色に変更
- [x] 変更内容をブラウザで確認
- [x] チェックポイント作成と結果報告


## お問い合わせボタンのアニメーション・レスポンシブ改善（2026年1月27日）
- [x] マウスオーバー時のアイコン回転アニメーションを追加
- [x] モバイル表示時のボタン位置を調整
- [x] 変更内容をブラウザで確認
- [x] チェックポイント作成と結果報告


## 試合結果とスケジュール管理の改善（2026年1月27日）
### ①試合結果の改善
- [x] データベーススキーマから会場名フィールドを削除
- [x] データベーススキーマに試合タイトルフィールドを追加（最大１５文字）
- [x] 管理画面の試合結果フォームから会場名フィールドを削除
- [x] 管理画面の試合結果フォームに試合タイトルフィールドを追加
- [x] 本番環境の試合結果ページで会場名を非表示にして試合タイトルを表示
- [x] 試合タイトルで試合結果を検索できるようにサーバーAPIを実装
- [x] 試合タイトル検索機能をテスト

### ②スケジュール管理の改善
- [x] データベーススキーマにスケジュール集合時間フィールドを追加
- [x] 管理画面のスケジュール管理フォームに集合時間フィールドを追加
- [x] 本番環境のスケジュール管理ページで集合時間を表示
- [x] スケジュール管理の表示順序を確認（日時→集合時間→場所）

### テスト・確認
- [x] 全機能のブラウザテスト
- [x] チェックポイント作成と結果報告


## 試合結果統計ページの実装（2026年1月27日）
- [x] 統計データ集計用のサーバーAPIを実装（学年別・カテゴリー別の勝敗数、得点数、失点数）
- [x] Chart.jsライブラリをインストール
- [x] 統計ページのフロントエンド実装（/statistics）
- [x] Chart.jsで円グラフ・棒グラフを実装
- [x] ヘッダーナビゲーションに統計ページへのリンクを追加
- [x] ブラウザで動作確認
- [x] チェックポイント作成と結果報告


## 管理画面ログインエラー修正（2026年1月27日）
- [x] エラーの原因を調査（Failed to fetch）
- [x] サーバー側のAPIエンドポイントを修正
- [x] ブラウザで動作確認
- [x] チェックポイント作成と結果報告


## スケジュール管理の集合時間表示修正（2026年1月27日）
- [x] 現状を確認して問題箇所を特定
- [x] 本番環境のスケジュール表示を修正（日時→集合時間→場所の順）
- [x] 管理画面のスケジュール管理を修正
- [x] ブラウザで動作確認
- [x] チェックポイント作成と結果報告


## 管理画面スケジュール管理フォームの集合時間フィールド表示修正（2026年1月27日）
- [x] Admin.tsxのスケジュール管理フォームで日時と場所の間に集合時間フィールドを表示
- [x] ブラウザで動作確認
- [x] チェックポイント作成と結果報告


## 本番環境スケジュールページの集合時間表示修正（2026年1月27日）
- [ ] Schedule.tsxを確認して集合時間が正しく表示されるように修正
- [ ] ブラウザで動作確認
- [ ] チェックポイント作成と結果報告


## 統計ページの管理画面統合（2026年1月31日）
- [x] 統計ページ（/statistics）を公開ナビゲーションから削除
- [x] 統計ページを管理画面の設定タブに統合
- [x] テストを実行して全機能が正常に動作することを確認（19/19テスト成功）
- [x] ブラウザで管理画面の設定タブに統計情報が表示されることを確認
- [x] チェックポイント作成と結果報告


## UI修正（2026年1月31日）
- [x] ライトモードでTOP画面の「サッカーの力」コンテンツのテキスト色を修正（背景色を黄色に変更、テキストを濃い色に変更）
- [x] 管理画面の「設定」タブ名を「設定・統計」に変更
- [x] ブラウザで修正内容を確認
- [x] チェックポイント作成
- [x] ライトモード・ダークモード両方で見やすいテキスト色に修正（ライトモード：黒背景白テキスト、ダークモード：黒背景白テキスト）
